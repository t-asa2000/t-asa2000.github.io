{{- $style := resources.Get "scss/partials/comments/disqusjs.scss" | resources.ToCSS | minify -}}
<link rel="stylesheet" href="{{ $style.RelPermalink }}">

<div class="disqus-container">
	<div class="article-tags" style="margin-bottom:2em;">
        <a href="javascript:DisqusReload();">コメント欄が表示されない場合はこちら</a>
	</div>
	<div id="disqus_thread"></div>
	<script>
		/**
		*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
		*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables    */
		
		var disqus_config = function () {
		this.page.url = {{- .Permalink -}};  // Replace PAGE_URL with your page's canonical URL variable
		this.page.identifier = {{- .RelPermalink -}}; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
		};
		
		(function() { // DON'T EDIT BELOW THIS LINE
		var d = document, s = d.createElement('script');
		s.src = 'https://{{ .Site.DisqusShortname }}.disqus.com/embed.js';
		s.async = true;
		s.setAttribute('data-timestamp', +new Date());
		(d.head || d.body).appendChild(s);
		})();
	</script>
	<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>

<script>
	function DisqusReload(){
		if (typeof DISQUS == 'object') {
            DISQUS.reset({
                reload: true
            });
        }
	}

	window.addEventListener('onColorSchemeChange', (e) => {
        DisqusReload();
    })
</script>